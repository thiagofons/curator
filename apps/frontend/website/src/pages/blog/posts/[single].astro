---
import Base from "@/layouts/Base.astro"
import { getPayloadPosts } from "@/lib/payload"
import PostSingle from "@/partials/PostSingle.astro"

export async function getStaticPaths() {
  const posts = (await getPayloadPosts()) as any

  const paths = posts.map((post: any) => ({
    params: {
      single: post.slug,
    },
    props: {
      post,
      isPayload: true,
      contentHtml: post.contentHtml,
    },
  }))
  return paths
}

const { post, isPayload, contentHtml } = Astro.props as {
  post: any
  isPayload?: boolean
  contentHtml?: string
}
const { title, meta_title, description, image } = post.data
---

<Base
  title={title}
  meta_title={meta_title}
  description={description}
  image={image}
>
  <PostSingle post={post} isPayload={isPayload} contentHtml={contentHtml} />
</Base>
