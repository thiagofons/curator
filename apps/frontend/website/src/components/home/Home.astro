---
import CTA from "@/components/common/CTA.astro";

import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import Base from "@/layouts/Base.astro";
import Hero from "./sections/Hero.astro";
import HowItWorks from "./sections/HowItWorks.astro";
import Problem from "./sections/Problem.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const { isFeatureEnabled } = Astro.locals;

type Feature =
  | "home.hero"
  | "home.problem"
  | "home.how_it_works"
  | "home.examples"
  | "home.cta";

const status = (feat: Feature) => isFeatureEnabled(feat);
---

<Base title={t("home.meta.title")} description={t("home.meta.description")}>
  {status("home.hero") && <Hero />}

  {status("home.problem") && <Problem />}

  {status("home.how_it_works") && <HowItWorks />}

  {status("home.examples") && <></>}

  {status("home.cta") && <CTA />}
</Base>
